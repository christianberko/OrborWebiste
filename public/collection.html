<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Orobor - Tennis Strings Reborn</title>
  <meta name="description" content="Orobor transforms discarded tennis strings into sustainable fashion. Join the circular economy movement.">
  <link rel="stylesheet" href="css/index.css">
  <link rel="stylesheet" href="css/collection.css">
  <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" >
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  
</head>
<body>
  <header>
    <div class="header-logo-title">
      <img src="imgs/OroborLogo.svg" alt="Orobor Logo" class="orobor-logo-svg orobor-logo-white" />
      <h1 class="brand">OROBOR</h1>
    </div>
    
    <!-- Desktop Navigation -->
    <nav class="desktop-nav">
      <a href="index.html">HOME</a>
      <a href="OurTeam.html">OUR TEAM</a>
      <a href="collection.html">COLLECTION LOCATIONS</a>
      <a href="partner.html">SEND STRINGS</a>
      <!-- Dashboard link - only visible to authenticated founders -->
      <a href="/dashboard" class="nav-dashboard" id="nav-dashboard" style="visibility: hidden;">DASHBOARD</a>
    </nav>
    
    <!-- Mobile Hamburger Button -->
    <button class="hamburger-btn" id="hamburger-btn" aria-label="Toggle menu">
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
    </button>
    
    <!-- Mobile Navigation Menu -->
    <nav class="mobile-nav" id="mobile-nav">
      <div class="mobile-nav-content">
        <a href="index.html">HOME</a>
        <a href="OurTeam.html">OUR TEAM</a>
        <a href="collection.html">COLLECTION LOCATIONS</a>
        <a href="#">SEND STRINGS</a>
        <!-- Dashboard link for mobile - only visible to authenticated founders -->
        <a href="/dashboard" class="mobile-dashboard" id="mobile-dashboard" style="visibility: hidden;">DASHBOARD</a>
        <div class="mobile-auth-loading" id="mobile-auth-loading" style="display: none;">
          <i class="fas fa-spinner fa-spin"></i>
        </div>
        <button class="mobile-profile-icon-btn" id="mobile-profile-icon-btn">
          <i class="fas fa-user"></i> PROFILE
        </button>
      </div>
    </nav>
    
    <!-- Desktop Profile Icon -->
    <div class="auth-button-container">
      <div class="auth-loading" id="auth-loading" style="display: none;">
        <i class="fas fa-spinner fa-spin"></i>
      </div>
      <button class="profile-icon-btn" id="profile-icon-btn">
        <i class="fas fa-user"></i>
      </button>
    </div>
  </header>

  <!-- Collection Hero Section -->
  <section class="collection-hero-section">
    <div class="collection-hero-container">
      <div class="collection-hero-content">
        <h1 class="collection-hero-title fade-in">String Collection Partners</h1>
        <p class="collection-hero-subtitle fade-in">Discover tennis facilities partnering with Orobor to create a sustainable future through string recycling</p>
        <div class="collection-hero-stats fade-in">
          <div class="stat-item scale-in">
            <span class="stat-number">50+</span>
            <span class="stat-label">Collection Locations</span>
          </div>
          <div class="stat-item scale-in">
            <span class="stat-number">15</span>
            <span class="stat-label">States Covered</span>
          </div>
          <!-- <div class="stat-item scale-in">
            <span class="stat-number">24/7</span>
            <span class="stat-label">Drop-off Access</span>
          </div> -->
        </div>
      </div>
  </div>
  </section>

  <div class="container">
    <!-- Full-screen map -->
    <div id="map"></div>
    
    <!-- Floating search bar -->
    <div class="search-overlay">
      <input type="text" id="search-input" placeholder="Search tennis locations...">
      <div class="search-results" id="search-results"></div>
    </div>
    
    <!-- State filter dropdown -->
    <div class="state-filter-container">
      <select id="state-filter" class="state-filter">
        <option value="all">All States</option>
        <option value="Arizona">Arizona</option>
        <option value="California">California</option>
        <option value="Connecticut">Connecticut</option>
        <option value="D.C.">D.C.</option>
        <option value="Florida">Florida</option>
        <option value="Georgia">Georgia</option>
        <option value="Hawaii">Hawaii</option>
        <option value="Illinois">Illinois</option>
        <option value="Louisiana">Louisiana</option>
        <option value="Maryland">Maryland</option>
        <option value="Minnesota">Minnesota</option>
        <option value="New York">New York</option>
        <option value="North Carolina">North Carolina</option>
        <option value="South Carolina">South Carolina</option>
        <option value="Texas">Texas</option>
        <option value="Vermont">Vermont</option>
        <option value="Virginia">Virginia</option>
        <option value="Wisconsin">Wisconsin</option>
      </select>
    </div>
    
    <!-- Floating location counter -->
    <div class="location-counter" id="location-counter">
      <span class="count" id="location-count">0</span>
      <span class="label">Locations</span>
    </div>
    
    <!-- Expandable location panel -->
    <div class="location-panel" id="location-panel">
      <div class="panel-drag-handle"></div>
      <div class="location-panel-header">
        <h2>Tennis String Collection Points</h2>
        <button class="panel-close" id="panel-close">×</button>
      </div>
      <div id="location-list"></div>
    </div>
    
    <!-- Backdrop for panel -->
    <div class="panel-backdrop" id="panel-backdrop"></div>
    

  </div>



  <div class="partner-section-cards">
    <div class="cards-header">
      <h2>Become a Collection Partner</h2>
      <p>Join the circular economy movement and make your tennis facility part of the solution.</p>
    </div>
    
    <div class="benefits-grid">
      <div class="benefit-card" data-impact="environmental">
        <div class="card-header">
        <div class="benefit-icon">
          <i class="fas fa-leaf"></i>
          </div>
          <h3>Environmental Impact</h3>
        </div>
        
        <div class="card-content">
          <p>Help reduce tennis string waste and support sustainable fashion while making a real difference for our planet. Every string collected prevents toxic emissions and reduces landfill waste.</p>
        </div>
      </div>
      
      <div class="benefit-card" data-impact="community">
        <div class="card-header">
        <div class="benefit-icon">
          <i class="fas fa-users"></i>
          </div>
          <h3>Community Engagement</h3>
        </div>
        
        <div class="card-content">
          <p>Attract eco-conscious players and build a sustainable community around your tennis facility. Create meaningful connections through shared environmental values.</p>
        </div>
      </div>
      
      <div class="benefit-card" data-impact="recognition">
        <div class="card-header">
        <div class="benefit-icon">
          <i class="fas fa-chart-line"></i>
          </div>
          <h3>Brand Recognition</h3>
        </div>
        
        <div class="card-content">
          <p>Position your facility as a leader in tennis sustainability and enhance your reputation. Stand out as an innovative, environmentally conscious business.</p>
        </div>
      </div>
    </div>
    
    <a href="partner.html" class="cta-button-cards">
      Start Partnership
      <i class="fas fa-arrow-right"></i>
    </a>
  </div>
    
  <!-- GSAP Library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
     integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
     crossorigin=""></script>
  <script src="js/map.js"></script>
  
  <script>
    // Mobile hamburger menu functionality and authentication
    document.addEventListener('DOMContentLoaded', function() {
      const hamburgerBtn = document.getElementById('hamburger-btn');
      const mobileNav = document.getElementById('mobile-nav');
      const mobileNavLinks = document.querySelectorAll('.mobile-nav-content a');
      
      // Navigation elements
      const navDashboard = document.getElementById('nav-dashboard');
      const mobileDashboard = document.getElementById('mobile-dashboard');
      const profileIconBtn = document.getElementById('profile-icon-btn');
      const mobileProfileIconBtn = document.getElementById('mobile-profile-icon-btn');
      const authLoading = document.getElementById('auth-loading');
      const mobileAuthLoading = document.getElementById('mobile-auth-loading');

      // Check authentication status on page load (for dashboard visibility only)
      checkAuthStatus();

      // Profile icon click functionality
      profileIconBtn.addEventListener('click', async function() {
        try {
          const response = await fetch('/api/auth/status');
          const data = await response.json();
          
          if (data.authenticated) {
            // User is signed in, redirect to logout page
            window.location.href = '/logout.html';
          } else {
            // User is not signed in, redirect to sign in page
            window.location.href = '/SignIn.html';
          }
        } catch (error) {
          console.error('Auth status check failed:', error);
          // Default to sign in page on error
          window.location.href = '/SignIn.html';
        }
      });

      // Mobile profile icon click functionality
      mobileProfileIconBtn.addEventListener('click', async function() {
        try {
          const response = await fetch('/api/auth/status');
          const data = await response.json();
          
          // Close mobile menu first
          hamburgerBtn.classList.remove('active');
          mobileNav.classList.remove('active');
          document.body.classList.remove('menu-open');
          
          if (data.authenticated) {
            // User is signed in, redirect to logout page
            window.location.href = '/logout.html';
          } else {
            // User is not signed in, redirect to sign in page
            window.location.href = '/SignIn.html';
          }
        } catch (error) {
          console.error('Auth status check failed:', error);
          // Default to sign in page on error
          window.location.href = '/SignIn.html';
        }
      });

      async function checkAuthStatus() {
        try {
          const response = await fetch('/api/auth/status');
          const data = await response.json();
          
          if (data.authenticated && data.user) {
            // User is signed in - show dashboard and user menu
            updateNavigationState(true, data.user.email);
          } else {
            // User is not signed in - show sign in button
            updateNavigationState(false);
          }
        } catch (error) {
          console.error('Auth status check failed:', error);
          // Default to signed out state on error
          updateNavigationState(false);
        }
      }

      function showLoadingState() {
        // Hide dashboard links (using visibility to prevent layout shift)
        navDashboard.style.visibility = 'hidden';
        mobileDashboard.style.visibility = 'hidden';
        
        // Show loading spinners
        authLoading.style.display = 'inline-block';
        mobileAuthLoading.style.display = 'block';
      }

      function updateNavigationState(isAuthenticated, userEmail = '') {
        // Hide loading spinners (if any were shown)
        authLoading.style.display = 'none';
        mobileAuthLoading.style.display = 'none';
        
        if (isAuthenticated) {
          // Show dashboard links (using visibility to prevent layout shift)
          navDashboard.style.visibility = 'visible';
          mobileDashboard.style.visibility = 'visible';
        } else {
          // Hide dashboard links (using visibility to prevent layout shift)
          navDashboard.style.visibility = 'hidden';
          mobileDashboard.style.visibility = 'hidden';
        }
        
        // Profile icons are always visible (already set on page load)
      }

      // Toggle mobile menu
      hamburgerBtn.addEventListener('click', function() {
        hamburgerBtn.classList.toggle('active');
        mobileNav.classList.toggle('active');
        
        // Prevent body scroll when menu is open
        if (mobileNav.classList.contains('active')) {
          document.body.classList.add('menu-open');
        } else {
          document.body.classList.remove('menu-open');
        }
      });

      // Close mobile menu when clicking on a link
      mobileNavLinks.forEach(link => {
        link.addEventListener('click', function() {
          hamburgerBtn.classList.remove('active');
          mobileNav.classList.remove('active');
          document.body.classList.remove('menu-open');
        });
      });

      // Close mobile menu when clicking outside
      mobileNav.addEventListener('click', function(e) {
        if (e.target === mobileNav) {
          hamburgerBtn.classList.remove('active');
          mobileNav.classList.remove('active');
          document.body.classList.remove('menu-open');
        }
      });

      // Close mobile menu on escape key
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && mobileNav.classList.contains('active')) {
          hamburgerBtn.classList.remove('active');
          mobileNav.classList.remove('active');
          document.body.classList.remove('menu-open');
        }
      });

      // Initialize GSAP animations
      initCollectionAnimations();
    });

    // GSAP Animations for Collection Page
    function initCollectionAnimations() {
      // Register ScrollTrigger plugin
      gsap.registerPlugin(ScrollTrigger);
      
      console.log('Initializing Collection GSAP animations...');
      
      // Check if elements exist before animating
      const heroTitle = document.querySelector('.collection-hero-title');
      const heroSubtitle = document.querySelector('.collection-hero-subtitle');
      const heroStats = document.querySelector('.collection-hero-stats');
      
      if (heroTitle && heroSubtitle && heroStats) {
        // Set initial states
        gsap.set([heroTitle, heroSubtitle, heroStats], { opacity: 0, y: 50 });
        
        const statItems = document.querySelectorAll('.collection-hero-stats .stat-item');
        if (statItems.length > 0) {
          gsap.set(statItems, { opacity: 0, scale: 0.8 });
        }
        
        // Hero section animations - using gsap.to() to avoid disappearing text
        const heroTL = gsap.timeline();
        heroTL.to(heroTitle, { duration: 1, y: 0, opacity: 1, ease: "power2.out" })
              .to(heroSubtitle, { duration: 0.8, y: 0, opacity: 1, ease: "power2.out" }, "-=0.5")
              .to(heroStats, { duration: 0.8, y: 0, opacity: 1, ease: "power2.out" }, "-=0.3");
        
        // Animate stat items if they exist
        if (statItems.length > 0) {
          heroTL.to(statItems, { duration: 0.6, scale: 1, opacity: 1, stagger: 0.2, ease: "back.out(1.7)" }, "-=0.3");
        }

        // Counter animation for stats
        const statNumbers = document.querySelectorAll('.collection-hero-stats .stat-number');
        if (statNumbers.length > 0) {
          // Store original values and set to 0
          statNumbers.forEach(el => {
            const original = el.textContent;
            el.setAttribute('data-original', original);
            if (original !== '24/7') { // Don't animate the 24/7 text
              el.textContent = '0';
            }
          });

          // Animate counters
          gsap.to(statNumbers, {
            duration: 2,
            delay: 0.5,
            innerText: function(index, target) {
              const original = target.getAttribute('data-original');
              if (original === '24/7') return original; // Skip 24/7
              const numValue = parseInt(original.replace('+', '')) || 1;
              return numValue;
            },
            snap: { innerText: 1 },
            onUpdate: function() {
              this.targets().forEach(target => {
                const original = target.getAttribute('data-original');
                if (original === '24/7') return; // Skip 24/7
                const currentValue = Math.round(target.innerText);
                target.textContent = original.includes('+') ? currentValue + '+' : currentValue;
              });
            },
            ease: "power2.out"
          });
        }
      }

      // Animate benefit cards
      const benefitCards = document.querySelectorAll('.benefit-card');
      if (benefitCards.length > 0) {
        gsap.set(benefitCards, { opacity: 0, y: 30 });
        benefitCards.forEach((card, index) => {
          gsap.to(card, {
            opacity: 1,
            y: 0,
            duration: 0.6,
            delay: index * 0.1,
            ease: "power2.out",
            scrollTrigger: {
              trigger: card,
              start: "top 85%",
              end: "bottom 20%",
              toggleActions: "play none none none"
            }
          });
        });
      }

      console.log('Collection GSAP animations initialized successfully');
    }

  </script>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-container">
      <!-- Column 1: Brand -->
      <div class="footer-column">
        <div class="footer-brand">
          <div class="footer-brand-header">
            <h2 class="footer-brand-text">OROBOR</h2>
            <img src="/imgs/OroborLogo.svg" alt="Orobor Logo" class="footer-logo" />
          </div>
          <h3 class="footer-tagline">Tennis Strings Reborn</h3>
          <p class="footer-mission">Transforming discarded tennis strings into sustainable fashion through innovative recycling technology.</p>
        </div>
        <div class="footer-social">
          <!-- <a href="#" class="social-link" aria-label="Facebook">
            <i class="fab fa-facebook-f"></i>
          </a>
          <a href="#" class="social-link" aria-label="Instagram">
            <i class="fab fa-instagram"></i>
          </a> -->
          <a href="https://www.linkedin.com/company/orobor/posts/?feedView=all"  target="_blank" class="social-link" aria-label="LinkedIn">
            <i class="fab fa-linkedin-in"></i>
          </a>
          <!-- <a href="#" class="social-link" aria-label="Twitter">
            <i class="fab fa-twitter"></i>
          </a> -->
        </div>
      </div>

      <!-- Column 2: Contact -->
      <div class="footer-column">
        <h4 class="footer-heading">Contact Us</h4>
        <div class="footer-contact">
          <div class="contact-item">
            <i class="fas fa-map-marker-alt"></i>
            <span>123 Tennis Court Way<br>Boston, MA 02215</span>
          </div>
          <div class="contact-item">
            <i class="fas fa-phone"></i>
            <span>(617) 555-0123</span>
          </div>
          <div class="contact-item">
            <i class="fas fa-envelope"></i>
            <span>jakob@orobor.com <br>
              jonah@orobor.com
              
          </div>

        </div>
      </div>


    </div>

    <!-- Bottom Bar -->
    <div class="footer-bottom">
      <div class="footer-bottom-content">
        <p class="copyright">© 2024 Orobor. All rights reserved.</p>
      </div>
    </div>
  </footer>
</body>
</html>